"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{7444:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var t=a(5155),r=a(2115),l=function(e){return e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e}({});let n={SNAKE_HEAD:"bg-green-500",SNAKE_BODY:"bg-green-400",FOOD:"bg-red-500",BOARD:"bg-gray-100"},c=e=>{let{snake:s,food:a,gridWidth:r,gridHeight:l,gridSize:c}=e;return(0,t.jsxs)("div",{className:"relative border-2 border-gray-300 ".concat(n.BOARD),style:{width:"".concat(r*c,"px"),height:"".concat(l*c,"px")},children:[(0,t.jsx)("div",{className:"absolute rounded-full ".concat(n.FOOD),style:{width:"".concat(c-2,"px"),height:"".concat(c-2,"px"),left:"".concat(a.x*c+1,"px"),top:"".concat(a.y*c+1,"px"),transition:"all 0.1s"}}),s.map((e,a)=>(0,t.jsx)("div",{className:"absolute rounded-sm ".concat(0===a?n.SNAKE_HEAD:n.SNAKE_BODY),style:{width:"".concat(c-2,"px"),height:"".concat(c-2,"px"),left:"".concat(e.x*c+1,"px"),top:"".concat(e.y*c+1,"px"),transition:"all 0.1s",zIndex:s.length-a}},e.id))]})},i=e=>{let{onDirectionChange:s,onReset:a,onTogglePause:r,isPaused:n,gameOver:c}=e,i="w-12 h-12 bg-blue-500 text-white rounded-full flex items-center justify-center shadow-md hover:bg-blue-600 active:bg-blue-700 focus:outline-none",o="px-4 py-2 rounded-md focus:outline-none";return(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex justify-center gap-2 mb-4",children:[(0,t.jsx)("button",{className:"".concat(o," ").concat(c?"bg-green-500 hover:bg-green-600":"bg-yellow-500 hover:bg-yellow-600"),onClick:c?a:r,children:c?"重新开始":n?"继续":"暂停"}),!c&&(0,t.jsx)("button",{className:"".concat(o," bg-gray-500 hover:bg-gray-600"),onClick:a,children:"重置"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 w-44 mx-auto",children:[(0,t.jsx)("div",{className:"col-start-2",children:(0,t.jsx)("button",{className:i,onClick:()=>s(l.UP),"aria-label":"Move Up",children:"↑"})}),(0,t.jsxs)("div",{className:"flex justify-between col-span-3",children:[(0,t.jsx)("button",{className:i,onClick:()=>s(l.LEFT),"aria-label":"Move Left",children:"←"}),(0,t.jsx)("div",{className:"w-12 h-12"})," ",(0,t.jsx)("button",{className:i,onClick:()=>s(l.RIGHT),"aria-label":"Move Right",children:"→"})]}),(0,t.jsx)("div",{className:"col-start-2",children:(0,t.jsx)("button",{className:i,onClick:()=>s(l.DOWN),"aria-label":"Move Down",children:"↓"})})]})]})},o=e=>{let s;do s={x:Math.floor(20*Math.random()),y:Math.floor(15*Math.random())};while(e.some(e=>e.x===s.x&&e.y===s.y));return s},d={snake:[{id:2,x:3,y:5},{id:1,x:2,y:5},{id:0,x:1,y:5}],food:{x:10,y:10},direction:l.RIGHT,nextDirection:l.RIGHT,gameOver:!1,score:0,isPaused:!1},x=()=>{let[e,s]=(0,r.useState)(()=>{let e={...d};return e.food=o(e.snake),e}),a=(0,r.useRef)(null),n=(0,r.useCallback)(()=>{s(()=>{let e={...d};return e.food=o(e.snake),e})},[]),x=(0,r.useCallback)(()=>{s(e=>({...e,isPaused:!e.isPaused}))},[]),u=(0,r.useCallback)(e=>{s(s=>s.direction===l.UP&&e===l.DOWN||s.direction===l.DOWN&&e===l.UP||s.direction===l.LEFT&&e===l.RIGHT||s.direction===l.RIGHT&&e===l.LEFT?s:{...s,nextDirection:e})},[]),h=(0,r.useCallback)(()=>{s(e=>{if(e.gameOver||e.isPaused)return e;let{snake:s,food:a,nextDirection:t,score:r}=e,n=s[0],c={...n,id:n.id+1};switch(t){case l.UP:c.y=(c.y-1+15)%15;break;case l.DOWN:c.y=(c.y+1)%15;break;case l.LEFT:c.x=(c.x-1+20)%20;break;case l.RIGHT:c.x=(c.x+1)%20}if(s.some(e=>e.x===c.x&&e.y===c.y))return{...e,gameOver:!0};let i=[c,...s],d=a,x=r;return c.x===a.x&&c.y===a.y?(x+=10,d=o(i)):i.pop(),{...e,snake:i,food:d,score:x,direction:t}})},[]);return(0,r.useEffect)(()=>{let e=e=>{switch(e.key){case"ArrowUp":u(l.UP);break;case"ArrowDown":u(l.DOWN);break;case"ArrowLeft":u(l.LEFT);break;case"ArrowRight":u(l.RIGHT);break;case" ":x();break;case"r":case"R":n()}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[u,n,x]),(0,r.useEffect)(()=>(a.current&&clearInterval(a.current),a.current=setInterval(()=>{h()},150),()=>{a.current&&clearInterval(a.current)}),[h]),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold my-4",children:"贪吃蛇游戏"}),(0,t.jsxs)("div",{className:"flex flex-col items-center bg-white p-6 rounded-lg shadow-lg",children:[(0,t.jsxs)("div",{className:"mb-4 flex justify-between w-full",children:[(0,t.jsxs)("span",{className:"text-xl font-semibold",children:["分数: ",e.score]}),(0,t.jsxs)("div",{children:[e.gameOver&&(0,t.jsx)("span",{className:"text-red-500 font-bold mr-4",children:"游戏结束!"}),e.isPaused&&!e.gameOver&&(0,t.jsx)("span",{className:"text-yellow-500 font-bold mr-4",children:"已暂停"})]})]}),(0,t.jsx)(c,{snake:e.snake,food:e.food,gridWidth:20,gridHeight:15,gridSize:20}),(0,t.jsx)(i,{onDirectionChange:u,onReset:n,onTogglePause:x,isPaused:e.isPaused,gameOver:e.gameOver}),(0,t.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[(0,t.jsx)("p",{children:"使用方向键或按钮控制蛇的移动"}),(0,t.jsx)("p",{children:"空格键暂停/继续游戏, R键重置游戏"})]})]})]})}}}]);